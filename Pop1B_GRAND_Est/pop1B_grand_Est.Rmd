---
title: "Population du grand est"
author: "JcB"
date: "20/01/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

CE  papier étudie la population du grand est. Source des donées: INSEE
/Users/jean-claudebartier/Documents/Demographie/INSEE_2013/BTX_TD_POP1B_2013.xls
Ce fichier, volumineux (40Mo) comporte les communes françaises avec le nombre d'habitants par sexe et age

Les bases tableaux détaillés 2012 et 2013 sont disponibles dans la rubrique Statistiques en sélectionnant les critères suivants :

thèmes : Démographie > Évolution et structure de la population
Niveau géographique : Toutes les communes
catégories : Données > Bases de données

Vous pouvez aussi accéder directement [à cette sélection](https://www.insee.fr/fr/statistiques?debut=0&idprec=2521169&theme=1&categorie=3&geo=TOUTES_COMMUNE-1).
Le fichier POP1B- Population par sexe et âge est disponible dans la base "Population est résidence antérieure". 

Description Wkipedia de a nouvelle région:
https://fr.wikipedia.org/wiki/Grand_Est

Récupération des données
========================
```{r}
# faire de la place
# rm(list=ls(all=TRUE))

# La commande fread est incroyablement plus rapide que read.csv
install.packages("OpenMPController")
library("OpenMPController")
library(data.table)

path <- "/Users/jean-claudebartier/Documents/Demographie/INSEE_2013/BTX_TD_POP1B_2013.csv"
d <- fread(path)
```

Données GE
----------
Le GE comporte 10 départements:

- Ardennes           08
- Aube               10
- Marne              51
- Haute Marne        52
- Meurthe et Moselle 54
- Meuse              55
- Moselle            57
- Bas-Rhin           67
- HautRhin           68
- Vosges             88

```{r}
region <- c("08", "10","51","52","54","55","57","67","68","88")
# ensemble des communes RGE
com_rge <- d[substr(d$CODGEO, 1, 2) %in% region,]

com_rge$h <- NA
com_rge$f <- NA
com_rge$tot <- NA
n <- nrow(com_rge)

a <- apply(com_rge[,3:103], 1, sum)
b <- apply(com_rge[,104:204], 1, sum)
com_rge$h <- a
com_rge$f <- b
com_rge$tot <- a + b

```

